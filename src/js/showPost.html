<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="MobileOptimized" content="width" />
		<meta name="HandheldFriendly" content="true" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="cleartype" content="on" />
		<script src="showdown.js"> </script>
		<style>
		html{
			color: white;
			background: black;
			font-size: 500%;
		}
		</style>
	</head>
	<script>
		var req = new XMLHttpRequest();
		req.open('GET', document.location, false);
		req.send(null);
		var headers = req.getAllResponseHeaders().toLowerCase();
		headers = headers.split(/\n|\r|\r\n/g).reduce(function(a, b) {
			if (b.length) {
				var [ key, value ] = b.split(': ');
				a[key] = value;
			}
			return a;
		}, {});
		console.log(headers);
		if(headers.hasOwnProperty("document")){
			var stuff = headers.document;
		}
		else{
			var stuff = (window.location + '').split('?')[1];
			stuff = decodeURIComponent(stuff);
		}
		stuff = headers.document + "";
		console.log(stuff);
		var md = "# No post defined!";
		if(stuff != "undefined"){
			md = stuff;
		}
	//	if(stuff.hasOwnProperty("s")){
	//		console.log(stuff.s);
	//		md = btoa(stuff.s);
	//	}
		var converter = new showdown.Converter(),
		text      = md,
		html      = converter.makeHtml(text);
		console.log(html);
		document.write(html);
	</script>
</html>
